{"version":3,"file":"index.js","names":["debug","transform","slugify","default","preeval","withLinariaMetadata","getLinariaMetadata","Module","DefaultModuleImplementation","isUnprocessedEntrypointError","UnprocessedEntrypointError","EvaluatedEntrypoint","parseFile","baseHandlers","prepareCode","Entrypoint","transformUrl","asyncResolveImports","syncResolveImports","loadLinariaOptions","withDefaultServices","isNode","getTagProcessor","getVisitorKeys","peek","processTemplateExpression","TransformCacheCollection","isEnabled","caller","name","evaluate","linaria","babel","options","JSON","stringify","plugins"],"sources":["../src/index.ts"],"sourcesContent":["/**\n * File defines babel preset for Linaria.\n * It uses ./extract function that is an entry point for styles extraction.\n * It also bypass babel options defined in Linaria config file with it's defaults (see ./utils/loadOptions).\n */\nimport type { ConfigAPI, TransformCaller } from '@babel/core';\n\nimport { debug } from '@linaria/logger';\n\nimport transform from './plugins/babel-transform';\nimport type { PluginOptions } from './types';\n\nexport { slugify } from '@linaria/utils';\n\nexport { default as preeval } from './plugins/preeval';\nexport {\n  default as withLinariaMetadata,\n  getLinariaMetadata,\n} from './utils/withLinariaMetadata';\nexport { default as Module, DefaultModuleImplementation } from './module';\nexport { default as transform } from './transform';\nexport {\n  isUnprocessedEntrypointError,\n  UnprocessedEntrypointError,\n} from './transform/actions/UnprocessedEntrypointError';\nexport * from './types';\nexport { EvaluatedEntrypoint } from './transform/EvaluatedEntrypoint';\nexport type { IEvaluatedEntrypoint } from './transform/EvaluatedEntrypoint';\nexport { parseFile } from './transform/Entrypoint.helpers';\nexport type { LoadAndParseFn } from './transform/Entrypoint.types';\nexport { baseHandlers } from './transform/generators';\nexport { prepareCode } from './transform/generators/transform';\nexport { Entrypoint } from './transform/Entrypoint';\nexport { transformUrl } from './transform/generators/extract';\nexport {\n  asyncResolveImports,\n  syncResolveImports,\n} from './transform/generators/resolveImports';\nexport { default as loadLinariaOptions } from './transform/helpers/loadLinariaOptions';\nexport { withDefaultServices } from './transform/helpers/withDefaultServices';\nexport type { Services } from './transform/types';\nexport { default as isNode } from './utils/isNode';\nexport { getTagProcessor } from './utils/getTagProcessor';\nexport { default as getVisitorKeys } from './utils/getVisitorKeys';\nexport type { VisitorKeys } from './utils/getVisitorKeys';\nexport { default as peek } from './utils/peek';\nexport { processTemplateExpression } from './utils/processTemplateExpression';\nexport { TransformCacheCollection } from './cache';\n\nfunction isEnabled(caller?: TransformCaller & { evaluate?: true }) {\n  return caller?.name !== 'linaria' || caller.evaluate === true;\n}\n\nexport default function linaria(babel: ConfigAPI, options: PluginOptions) {\n  if (!babel.caller(isEnabled)) {\n    return {};\n  }\n  debug('options', JSON.stringify(options));\n  return {\n    plugins: [[transform, options]],\n  };\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAGA,SAASA,KAAK,QAAQ,iBAAiB;AAEvC,OAAOC,SAAS,MAAM,2BAA2B;AAGjD,SAASC,OAAO,QAAQ,gBAAgB;AAExC,SAASC,OAAO,IAAIC,OAAO,QAAQ,mBAAmB;AACtD,SACED,OAAO,IAAIE,mBAAmB,EAC9BC,kBAAkB,QACb,6BAA6B;AACpC,SAASH,OAAO,IAAII,MAAM,EAAEC,2BAA2B,QAAQ,UAAU;AACzE,SAASL,OAAO,IAAIF,SAAS,QAAQ,aAAa;AAClD,SACEQ,4BAA4B,EAC5BC,0BAA0B,QACrB,gDAAgD;AACvD,cAAc,SAAS;AACvB,SAASC,mBAAmB,QAAQ,iCAAiC;AAErE,SAASC,SAAS,QAAQ,gCAAgC;AAE1D,SAASC,YAAY,QAAQ,wBAAwB;AACrD,SAASC,WAAW,QAAQ,kCAAkC;AAC9D,SAASC,UAAU,QAAQ,wBAAwB;AACnD,SAASC,YAAY,QAAQ,gCAAgC;AAC7D,SACEC,mBAAmB,EACnBC,kBAAkB,QACb,uCAAuC;AAC9C,SAASf,OAAO,IAAIgB,kBAAkB,QAAQ,wCAAwC;AACtF,SAASC,mBAAmB,QAAQ,yCAAyC;AAE7E,SAASjB,OAAO,IAAIkB,MAAM,QAAQ,gBAAgB;AAClD,SAASC,eAAe,QAAQ,yBAAyB;AACzD,SAASnB,OAAO,IAAIoB,cAAc,QAAQ,wBAAwB;AAElE,SAASpB,OAAO,IAAIqB,IAAI,QAAQ,cAAc;AAC9C,SAASC,yBAAyB,QAAQ,mCAAmC;AAC7E,SAASC,wBAAwB,QAAQ,SAAS;AAElD,SAASC,SAASA,CAACC,MAA8C,EAAE;EACjE,OAAOA,MAAM,EAAEC,IAAI,KAAK,SAAS,IAAID,MAAM,CAACE,QAAQ,KAAK,IAAI;AAC/D;AAEA,eAAe,SAASC,OAAOA,CAACC,KAAgB,EAAEC,OAAsB,EAAE;EACxE,IAAI,CAACD,KAAK,CAACJ,MAAM,CAACD,SAAS,CAAC,EAAE;IAC5B,OAAO,CAAC,CAAC;EACX;EACA3B,KAAK,CAAC,SAAS,EAAEkC,IAAI,CAACC,SAAS,CAACF,OAAO,CAAC,CAAC;EACzC,OAAO;IACLG,OAAO,EAAE,CAAC,CAACnC,SAAS,EAAEgC,OAAO,CAAC;EAChC,CAAC;AACH"}